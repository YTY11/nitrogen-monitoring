(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e3069e"],{"4fd5":function(t,e,i){},5635:function(t,e,i){},"6d99":function(t,e,i){"use strict";i("dbd9")},"98ed":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAFPklEQVRYCcWXXYhVVRTHPffL5t47Hyk1JpHjiGhUmk89hCn1UAaBPYlkhZEJEz6kmaFZcItSMgp9kXqYFw0jAu2hoijJHnoQwg/EME0caEoxmI87jtzp3vG3dmdddmfuOWefy9zmwL5r7b3W+q//WXvfvffxZllPuVx+oFqtbpucnFzJ8DzP89KWuWUq+SbINUg7ns1m97a1tV3WZJ4oOKSHh4d34PAWek6NMyTL5N3e1dV1UPIbgpDbDbGSTQiyFfoDtJo9Pt06eTPkWoD8z2ylUqkXOjo6+j2mdTnTehKHrCTH+SJ6X2dn548+yenmNAWPfHl4rKnVagfQ7/IdRnK53P0e1fuUwfUyKORgvQIpZf7fH0h2U6yz8LnDT74vhbJKmWDomylywqFYLF4l/2vKB32VEOyWAToVmVY1zpTMZDLfaW4K1p3iRxfngJBU40zJfD7/B7nHJT98MhmLSNP/1pGRkaXgLGaRz+ffV+OlB2nn2Sp+t/CTqHUuNsEkALP4c83hDWVTXwexRRqMrqr4nMN+mKWzH9+xuiGBImsw8UPiPhJfgsxOZJ1cEAjbfYy9S4UvDg0NrQvaXfqJKkjCHOQOIjfa4FTnJ/qnkLKxy7peSHscfaH4oc9DHIHog+3t7Tvxm5RxlycRQSEHqE2unzW3h73zQqNko6Ojj7Kv7cO2QuxU/HVITqC+KX2Xx3mKIfcygEpujCqs508gx1FDcpKcav3A+nsI9RPpy0M1d0Ny7b+9+F8ngpCbA/A7CpdOp58n8RHtR0leZIIXeQl5SP2o5IfgOV1KnAgCvg3wLkmAvp/KfKHJXCWV3oTvFd+/hyq+6BLrRJC3Nf9AqQY7/R4X4KAPsTdZryUdV0zth8lYgiz0ewEzWwnyWKFQ+DMMLG6cyn8OUXNaIR9m67k9LiaWIKQWKwgVOKl6MxJSo8T9IrHgphG9okc9sQRZ0PMVgATNHl0KIcTkrDUPL6x3Px2aImMJAlLVKMgm2jc1LiClcs5PLEHeeFDR0GOnRH3DJLNwt9rAu6Z6mHQheF6DZWGr3oyU/ZQ4c6qANcHWcy4OJ5agXJkAU6AnxsfHzfkaBxxi30DVzBQjfwY39oYTS1ASAXbYl6lKpVIKSR45DIZs9LvUCXIfqx4lnQj697m/BIhEG9i/NkeBBm3EpDg55OPsTrFBTj7OPgv6Neo7EfSn4hUFoH+AhFu1HyUhVcT3KHKN+BFbo22k/RMRd11sxFx3IijO/uVgrx+YZcv5gEX/NSfNahkLPoDPxv4sTW7VT1n2CuQi82KX69gZLiUlj+kyl0cGL0BiiQU0RSWRRzVKyDdsI7HysX8aOcC4/Al66K9GdtAaPWMkf5Kj70Qjoz2WiKAGQnKtXJno9+hYlIT4r7QdxJTwW+77OpGMLHVYUhb4Uaq9lKRyiT2BrJ82GsOY3JzF9gz+y2hfcio9xthp36fAbfsrlsgjGtNINlXBIJB/K+mFgDm3md5rEDoLuRtBX6o/l0p+z7hTJesECbjMptwbBGxFPwnJlE4PcgFvXmwFoSAm1f3bdbrlE9FcQJGymT4dBGtV35WkVPC4ReIj1tMiq99SNYTkMYplvn8kuexrSxg4RbvNZ1Om/G/TvuV6/xtjzh/ZfrwtPL9TpRA3bYOt22tSlhzfPfeQ21zzDAAOr/LPet8Omk6dpPKSh9iangvDpUCdbDmbkWfw+0b9DEEGpZJbkO9hyKtxuiWJC5CdsvVE5dEpMD6y/gDYCtGVyG4Gzd0tCiDMBkYWm34iyPnbD0GnC4aNeQuYOYEttFoa5wAAAABJRU5ErkJggg=="},"9dc7":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"n2-error"},[i("Select",{attrs:{floorList:t.floorList,lineList:t.lineList},on:{seek:t.seek}}),i("div",{staticClass:"content-middle"},[i("Analysis",{attrs:{analysis:t.analysis,exceptionList:t.exceptionList},on:{clickShowData:t.clickShowData}})],1),i("div",{staticClass:"content-bottom"},[i("Info",{attrs:{exceptionList:t.showExceptionList},on:{chuLi:t.chuLi,weiXiu:t.weiXiu}})],1)],1)},s=[],o=i("2909"),a=(i("4de4"),i("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select"},[n("div",{staticClass:"floor-select"},[n("input",{ref:"floor",staticClass:"select-input",attrs:{type:"text",readonly:"",placeholder:"请选择"},on:{click:t.isShowFloorList}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.isFloorShow,expression:"isFloorShow"}],staticClass:"floor-ul"},t._l(t.floorList,(function(e,i){return n("li",{key:i,on:{click:function(i){return t.activeFloor(e)}}},[t._v(" "+t._s(e)+" ")])})),0)]),n("div",{staticClass:"line-select div-margin"},[n("input",{ref:"line",staticClass:"select-input",attrs:{type:"text",readonly:"",placeholder:"请选择"},on:{click:t.isShowLineList}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.isLineShow,expression:"isLineShow"}],staticClass:"floor-ul line-ul"},t._l(t.lineDatas,(function(e,i){return n("li",{key:i,on:{click:function(i){return t.activeLine(e)}}},[t._v(" "+t._s(e)+" ")])})),0)]),n("img",{attrs:{src:i("98ed")},on:{click:t.seek}})])}),c=[],l={name:"Select",props:{floorList:{type:Array,default:function(){return[]}},lineList:{type:Object,default:function(){return{}}}},data:function(){return{isFloorShow:!1,isLineShow:!1,floor:"",line:"",lineDatas:[]}},methods:{isShowFloorList:function(){this.isLineShow=!1,this.isFloorShow=!this.isFloorShow},isShowLineList:function(){this.isFloorShow=!1,this.isLineShow=!this.isLineShow},activeFloor:function(t){var e;(this.$refs.line.value="线体",this.isFloorShow=!1,this.$refs.floor.value=t,this.floor=t,this.lineDatas=[],""!=t)&&(this.lineDatas.push("ALL"),this.lineList[t]&&(e=this.lineDatas).push.apply(e,Object(o["a"])(this.lineList[t])))},activeLine:function(t){this.isLineShow=!1,this.$refs.line.value=t,this.line=t},seek:function(){this.floor=this.$refs.floor.value,this.line=this.$refs.line.value;var t=this.floor,e=this.line;""!=t&&""!=e&&"线体"!=e&&this.$emit("seek",t,e)}}},r=l,u=(i("6d99"),i("2877")),f=Object(u["a"])(r,a,c,!1,null,"ff6bb5be",null),h=f.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"analysis"},[i("div",{staticClass:"profix-container"},[t._v("异常管理")]),i("div",{staticClass:"content-container"},[i("table",{attrs:{border:"0",cellspacing:"0"}},[t._m(0),i("tbody",t._l(t.analysis,(function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(e.Type))]),i("td",{staticClass:"text red",on:{click:function(i){return t.clickShowData(0,e.Type)}}},[i("span",{staticClass:"textOne"},[t._v(t._s(e.Todo))])]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData(1,e.Type)}}},[t._v(" "+t._s(e.Doing)+" ")]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData(2,e.Type)}}},[t._v(" "+t._s(e.Done)+" ")]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData(3,e.Type)}}},[t._v(" "+t._s(e.Ignore)+" ")]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData("H",e.Type)}}},[t._v(" "+t._s(e.H)+" ")]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData("M",e.Type)}}},[t._v(" "+t._s(e.M)+" ")]),i("td",{staticClass:"text",on:{click:function(i){return t.clickShowData("ALL",e.Type)}}},[t._v(" "+t._s(e.ALL)+" ")])])})),0)])])])},d=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("td",{staticClass:"type reduis-th",attrs:{rowspan:"2"}},[t._v("机故类型")]),i("td",{staticClass:"xian",attrs:{colspan:"4"}},[t._v("维修进度")]),i("td",{staticClass:"xian",attrs:{colspan:"2"}},[t._v("优先级")]),i("td",{staticClass:"reduis-th",attrs:{rowspan:"2"}},[t._v("ALL")])]),i("tr",[i("td",[t._v("待处理")]),i("td",[t._v("处理中")]),i("td",[t._v("已处理")]),i("td",[t._v("忽略")]),i("td",[t._v("H")]),i("td",[t._v("M")])])])}],A={name:"Analysis",props:{analysis:{type:Array,default:function(){return[]}},exceptionList:{type:Array,default:function(){return[]}}},data:function(){return{showExceptionList:[]}},methods:{clickShowData:function(t,e){this.$emit("clickShowData",t,e)}}},v=A,L=(i("e060"),Object(u["a"])(v,p,d,!1,null,"22fc7504",null)),y=L.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"info"},[i("div",{staticClass:"profix-container"},[t._v("异常报警信息")]),i("div",{staticClass:"content-container"},[i("table",{attrs:{border:"0",cellspacing:"0"}},[t._m(0),i("tbody",t._l(t.exceptionList,(function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(e.Floor))]),i("td",[t._v(t._s(e.LineName))]),i("td",[t._v(t._s(e.ExceptionType))]),i("td",[t._v(t._s(e.RepairAdvice))]),i("td",{class:{textOne:"H"==e.Priority}},[t._v(" "+t._s(e.Priority)+" ")]),i("td",[t._v(t._s(e.InputTime))]),i("td",[t._v(t._s(null==e.EndTime?"":e.EndTime))]),i("td",[t._v(t._s(e.TimeCount))]),i("td",[t._v(t._s(e.Department))]),i("td",[t._v(t._s(e.RepairContent))]),i("td",[0==e.State?i("button",{staticClass:"typebut",on:{click:function(i){return t.typebut(e.Id)}}},[i("span",{staticClass:"textblink"},[t._v("待处理")])]):t._e(),1==e.State?i("button",{staticClass:"typebut2",on:{click:function(i){return t.typebut2(e.Id)}}},[t._v(" 处理中 ")]):t._e(),2==e.State?i("button",{staticClass:"typebut3"},[t._v("已处理")]):t._e(),3==e.State?i("button",{staticClass:"typebut3"},[t._v("忽略")]):t._e()])])})),0)])])])},x=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("td",{staticClass:"floor"},[t._v("楼层")]),i("td",{staticClass:"line"},[t._v("线体")]),i("td",{staticClass:"type"},[t._v("异常类型")]),i("td",{staticClass:"advice"},[t._v("维修建议")]),i("td",{staticClass:"priority"},[t._v("优先级")]),i("td",{staticClass:"start"},[t._v("异常开始时间")]),i("td",{staticClass:"end"},[t._v("异常结束时间")]),i("td",{staticClass:"time-count"},[t._v("异常时常(Min)")]),i("td",{staticClass:"unit"},[t._v("责任单位")]),i("td",{staticClass:"service-content"},[t._v("维修内容")]),i("td",{staticClass:"state"},[t._v("状态")])])])}],g=(i("ac1f"),i("5319"),{name:"Info",props:{exceptionList:{type:Array,default:function(){return[]}}},methods:{typebut:function(t){var e=this;this.$confirm("确认接受处理异常, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$emit("chuLi",t)})).catch((function(){e.$message({type:"info",message:"已取消"})}))},typebut2:function(t){var e=this,i=this.$createElement;this.$msgbox({title:"消息",message:i("div",{attrs:{class:"el-textarea"}},[i("textarea",{attrs:{class:"el-textarea__inner",autocomplete:"off",rows:4,id:"commentContent"},value:this.commentContent})]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,i,n){if("confirm"===t){var s=document.getElementById("commentContent").value;s=s.replace(/\s/g,""),""==s?e.$message({type:"info",message:"请输入维修内容!"}):n()}else n()}}).then((function(){var i=document.getElementById("commentContent").value;i=i.replace(/\s/g,""),e.$emit("weiXiu",t,i),document.getElementById("commentContent").value=""})).catch((function(){e.$message({type:"info",message:"已取消维修"})}))}}}),_=g,C=(i("e594"),Object(u["a"])(_,m,x,!1,null,"75f1a50c",null)),w=C.exports,D=i("9d10"),k=i("37ca"),S={name:"N2Error",components:{Select:h,Analysis:y,Info:w},data:function(){return{floorList:[],lineList:{},floor:"D061F",line:"ALL",analysis:[],exceptionList:[],showExceptionList:[],intervalValue:"",value:null,type:null}},created:function(){var t=this;this.getEnergyFloors(),this.getErrorData(this.floor,this.line),this.intervalValue=setInterval((function(){t.getErrorData(t.floor,t.line)}),15e3)},beforeDestroy:function(){""!=this.intervalValue&&clearInterval(this.intervalValue)},methods:{getEnergyFloors:function(){var t=this;Object(D["d"])().then((function(e){0==e.Status&&(t.floorList=e.Data.Floor,t.floorList.unshift("ALL"),t.lineList=e.Data.LineName)})).catch((function(t){console.log(t)}))},getErrorData:function(t,e){var i=this;Object(k["a"])(t,e).then((function(t){if(0==t.Status){i.analysis=t.Data.Analyze,i.exceptionList=t.Data.ExceptionList;var e=i.exceptionList.filter((function(t){return"H"==t.Priority})),n=i.exceptionList.filter((function(t){return"M"==t.Priority}));i.exceptionList=[],i.exceptionList=[].concat(Object(o["a"])(e),Object(o["a"])(n)),i.showExceptionList=i.exceptionList;var s=i.analysis,a={Type:"ALL",ALL:s[0]["ALL"]+s[1]["ALL"],Doing:s[0]["Doing"]+s[1]["Doing"],Done:s[0]["Done"]+s[1]["Done"],H:s[0]["H"]+s[1]["H"],Ignore:s[0]["Ignore"]+s[1]["Ignore"],M:s[0]["M"]+s[1]["M"],Todo:s[0]["Todo"]+s[1]["Todo"]};i.analysis.push(a),i.clickShowData(i.value,i.type)}})).catch((function(t){console.log(t)}))},clickShowData:function(t,e){this.value=t,this.type=e,"number"==typeof t?this.showExceptionList="ALL"==e?this.exceptionList.filter((function(e){return e.State==t})):this.exceptionList.filter((function(i){return i.State==t&&i.ExceptionType==e})):"string"==typeof t&&(this.showExceptionList="ALL"==t?"ALL"==e?this.exceptionList:this.exceptionList.filter((function(t){return t.ExceptionType==e})):"ALL"==e?this.exceptionList.filter((function(e){return e.Priority==t})):this.exceptionList.filter((function(i){return i.Priority==t&&i.ExceptionType==e})))},upData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;Object(k["b"])(t,i,n,s).then((function(t){0==t.Status&&(e.$message({type:"success",message:"已确定!"}),e.getErrorData(e.floor,e.line),console.log("已确定"))})).catch((function(t){console.log(t)}))},chuLi:function(t){this.upData(t,"","",1)},weiXiu:function(t,e){var i=this.$utilsFun.dateFormat("YYYY/mm/dd HH:MM:SS",new Date);this.upData(t,i,e,2)},seek:function(t,e){this.value=null,this.type=null,this.floor=t,this.line=e,this.getErrorData(this.floor,this.line)}}},b=S,E=(i("ac6a"),Object(u["a"])(b,n,s,!1,null,"0849a0af",null));e["default"]=E.exports},a757:function(t,e,i){},ac6a:function(t,e,i){"use strict";i("a757")},dbd9:function(t,e,i){},e060:function(t,e,i){"use strict";i("4fd5")},e594:function(t,e,i){"use strict";i("5635")}}]);
//# sourceMappingURL=chunk-35e3069e.3b9be9a9.js.map